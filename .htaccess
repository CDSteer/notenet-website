# Don't allow folders to be viewed
Options -Indexes

# Rewrite Engine
RewriteEngine On

# Swap these when migrating to new domain
#RewriteBase /
RewriteBase /NoteCube

# Do not do anything for already existing files
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .+ - [L]

# Redirections
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_METHOD} !=POST
RewriteRule ^(.*)/$ $1 [R=301,L]

RewriteRule ^api/v([0-9]+)(/(.*?))?$ lib/api/src/v$1/web.php [QSA,L]
RewriteRule ^(.*)$ index.php?page=$1 [QSA,L]

# Block access to API folders
# <FilesMatch "(controllers|views)/\.(htm|html|css|js|php)$">
# Order Deny,Allow
# Deny From All
# Allow From All
# </FilesMatch>